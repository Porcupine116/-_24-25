{% extends "base.html" %}
{% block title %}Сдать задание{% endblock %}

{% block content %}
<div class="form-container" style="max-width: 540px; margin: 0 auto;">
    <h1>Сдача задания</h1>

    <div class="assignment-info-block">
        <h2>{{ assignment.title }}</h2>
        <p><b>Описание:</b> {{ assignment.description }}</p>
        <p>
            <b>Срок сдачи:</b>
            {% if assignment.deadline %}
                {{ assignment.deadline.strftime('%d.%m.%Y %H:%M') }}
            {% else %}
                Без срока
            {% endif %}
        </p>
        <p><b>Максимальный балл:</b> {{ assignment.max_score }}</p>
    </div>

    <form method="POST" class="submit-form">
        {% if assignment.questions %}
            {% for q in assignment.questions %}
            <div class="question-block" style="margin-bottom:20px;">
                <div><b>Вопрос {{ loop.index }}:</b> {{ q.text }}</div>
                {% for opt in q.options %}
                <div style="margin-left:18px;">
                    <input type="radio" name="question_{{ q.id }}" value="{{ opt.id }}" id="q{{ q.id }}_opt{{ opt.id }}" required>
                    <label for="q{{ q.id }}_opt{{ opt.id }}">{{ opt.text }}</label>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        {% else %}
            <div class="form-group">
                <label for="solution_text">Ваше решение:</label>
                <textarea id="solution_text" name="solution_text" rows="8" required placeholder="Введите ваше решение здесь..." style="width: 100%;"></textarea>
            </div>
        {% endif %}
        <button type="submit" class="btn btn-primary">Отправить</button>
        <a href="{{ url_for('main.dashboard') }}" class="btn btn-small">Назад</a>
    </form>
</div>
{% endblock %}
